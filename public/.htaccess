RewriteEngine On
# NOTE: Struktur Anda saat ini: htdocs/saku_santri/saku_santri/public
# RewriteBase lama menunjuk ke /saku_santri/public/ (satu level kurang) sehingga bisa memicu 404.
# Opsi 1 (direkomendasikan): Hapus saja RewriteBase (mod_rewrite akan pakai path relatif).
# Opsi 2: Set ke path yang benar: /saku_santri/saku_santri/public/
# Di bawah ini saya komentari yang lama dan aktifkan yang baru yang sesuai.
# Jika project diakses sebagai http://localhost/saku_santri/ dan folder public bukan DocumentRoot,
# cukup gunakan satu level base berikut. Jika Anda memindahkan DocumentRoot ke folder public, hilangkan RewriteBase.
RewriteBase /saku_santri/

# --- Pretty URLs within /public ---
# Login / Logout
RewriteCond %{REQUEST_METHOD} POST
RewriteRule ^login$ login_process.php [L]
RewriteCond %{REQUEST_METHOD} !POST
RewriteRule ^login$ index.php [L]
RewriteRule ^logout$ logout.php [L]
# Admin
RewriteRule ^admin/?$ admin/index.php [L]
RewriteRule ^admin/home$ admin/index.php [L]
RewriteRule ^admin/konfirmasi$ admin/konfirmasi.php [L]
RewriteRule ^admin/buat-tagihan$ admin/buat_tagihan.php [L]
RewriteRule ^admin/pengguna$ admin/pengguna.php [L]
RewriteRule ^admin/pengguna-detail$ admin/pengguna_detail.php [L]
RewriteRule ^admin/kelola-user$ admin/kelola_user.php [L]
RewriteRule ^admin/riwayat$ admin/riwayat_transaksi.php [L]
RewriteRule ^admin/notifikasi$ admin/notifikasi.php [L]
RewriteRule ^admin/hapus-transaksi$ admin/hapus_transaksi.php [L]
RewriteRule ^kasir/transaksi$ kasir/transaksi.php [L]

# Wali
RewriteRule ^wali/?$ wali/index.php [L]
RewriteRule ^wali/home$ wali/index.php [L]
RewriteRule ^wali/bayar-spp$ wali/bayar_spp.php [L]
RewriteRule ^wali/kirim-saku$ wali/kirim_saku.php [L]
RewriteRule ^wali/riwayat$ wali/riwayat.php [L]
RewriteRule ^wali/ubah-password$ wali/ubah_password.php [L]

# Bukti
RewriteRule ^bukti$ view_bukti.php [L]
RewriteRule ^bukti/f/(.+)$ bukti_file.php?f=$1 [L]

# Fallback to direct files if exist
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule . - [L]

# Otherwise route to index
RewriteRule . index.php [L]
